IF $(OneTimeLoad) = 1
BEGIN

DECLARE @PlayStep TABLE
(
PlayKey int NOT NULL ,
TempoNumber int NOT NULL ,
Actor char(1) NOT NULL ,
FootworkKey int NULL,
TechniqueKey1 int NULL,
TechniqueKey2 int NULL,
TechniqueKey3 int NULL,
TargetKey1 int NULL,
TargetKey2 int NULL,
TargetKey3 int NULL,
GuardKey int NULL,
GuardModifierKey int NULL,
IntermediateGuardKey int NULL,
IntermediateGuardModifierKey int NULL,
Notes nvarchar(max) NULL

);

INSERT INTO @PlayStep
(  PlayKey,
TempoNumber,
Actor,
FootworkKey,
TechniqueKey1,
TechniqueKey2,
TechniqueKey3,
TargetKey1,
TargetKey2,
TargetKey3,
GuardKey,
GuardModifierKey,
IntermediateGuardKey,
IntermediateGuardModifierKey,
Notes )
VALUES

(3, 1, 'A', NULL, 36, NULL, NULL, 15, NULL, NULL, 71, NULL, NULL, NULL, NULL),
(3, 2, 'A', NULL, 398, NULL, NULL, 15, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(3, 3, 'A', NULL, 40, NULL, NULL, 15, NULL, NULL, 66, NULL, NULL, NULL, NULL),
(4, 1, 'A', NULL, 398, NULL, NULL, 17, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(4, 1, 'P', NULL, 502, NULL, NULL, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(4, 2, 'A', NULL, 497, NULL, NULL, 15, NULL, NULL, 71, NULL, NULL, NULL, NULL),
(7, 1, 'A', 1, 498, NULL, NULL, NULL, NULL, NULL, 73, NULL, NULL, NULL, NULL),
(7, 2, 'A', 128, 36, NULL, NULL, 1, NULL, NULL, 73, NULL, NULL, NULL, NULL),
(8, 1, 'A', NULL, 500, NULL, NULL, 17, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(8, 1, 'P', NULL, 502, NULL, NULL, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(8, 2, 'A', NULL, 36, 501, NULL, 15, NULL, NULL, 72, NULL, NULL, NULL, NULL),
(8, 3, 'A', 130, 398, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(9, 1, 'A', NULL, 70, NULL, NULL, NULL, NULL, NULL, 97, NULL, NULL, NULL, NULL),
(9, 1, 'P', NULL, 502, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(9, 2, 'A', NULL, 124, NULL, NULL, NULL, NULL, NULL, 73, NULL, NULL, NULL, NULL),
(9, 3, 'A', 131, 36, 501, NULL, 10, 5, NULL, NULL, NULL, NULL, NULL, NULL),
(9, 4, 'A', 130, 398, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(10, 1, 'A', 1, 70, NULL, NULL, 18, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(10, 2, 'A', NULL, 500, 40, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(11, 1, 'A', NULL, 503, 36, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(12, 1, 'A', NULL, 29, 70, 70, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(13, 1, 'A', NULL, 27, 70, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(14, 1, 'A', NULL, 36, NULL, NULL, 10, 20, 5, NULL, NULL, NULL, NULL, NULL),
(14, 1, 'P', 130, 504, NULL, NULL, NULL, NULL, NULL, 9, NULL, NULL, NULL, NULL),
(14, 2, 'P', 2, 73, 36, NULL, 10, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(15, 1, 'A', NULL, 73, NULL, NULL, 10, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(15, 1, 'P', NULL, 124, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(15, 2, 'A', NULL, 70, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(15, 2, 'P', NULL, 505, NULL, NULL, 15, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(16, 1, 'A', NULL, 499, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(16, 1, 'P', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 69, NULL, NULL, NULL, NULL),
(16, 2, 'A', NULL, 398, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(16, 3, 'A', NULL, 124, 36, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(17, 1, 'A', NULL, 36, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(17, 1, 'P', NULL, 506, NULL, NULL, NULL, NULL, NULL, 98, NULL, NULL, NULL, NULL),
(17, 2, 'A', NULL, 36, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(17, 3, 'A', 131, 24, 36, NULL, NULL, 10, NULL, NULL, NULL, NULL, NULL, NULL),
(18, 1, 'A', NULL, 503, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(18, 1, 'P', NULL, 36, NULL, NULL, NULL, NULL, NULL, 98, NULL, NULL, NULL, NULL),
(18, 2, 'A', NULL, 36, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(18, 2, 'P', NULL, 24, 398, NULL, 17, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(37, 1, 'A', NULL, 73, NULL, NULL, 10, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(37, 1, 'P', 123, 328, NULL, NULL, 10, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(38, 1, 'A', NULL, 36, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(38, 1, 'P', NULL, 73, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(39, 1, 'A', NULL, 70, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(39, 1, 'P', NULL, 519, NULL, NULL, 10, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(40, 1, 'A', NULL, 24, NULL, NULL, 21, 10, NULL, NULL, NULL, NULL, NULL, NULL),
(40, 1, 'P', NULL, 328, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(41, 1, 'A', NULL, 500, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(41, 1, 'P', NULL, 521, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(41, 2, 'A', NULL, 36, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(41, 2, 'P', 130, 520, NULL, NULL, 15, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(42, 1, 'A', NULL, 398, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(42, 1, 'P', NULL, 124, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(42, 2, 'A', NULL, 398, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(42, 2, 'P', 141, 399, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(43, 1, 'A', NULL, 500, 500, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(43, 1, 'P', 130, NULL, NULL, NULL, NULL, NULL, NULL, 8, NULL, NULL, NULL, NULL),
(43, 2, 'A', NULL, 36, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(43, 2, 'P', 2, 24, NULL, NULL, 21, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(43, 3, 'P', NULL, 398, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(44, 1, 'A', NULL, 398, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(44, 1, 'P', NULL, 36, NULL, NULL, 10, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(45, 1, 'A', NULL, 500, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(45, 1, 'P', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 69, NULL, NULL, NULL, NULL),
(45, 2, 'A', NULL, 36, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(45, 2, 'P', 127, 124, 522, NULL, 24, NULL, NULL, NULL, NULL, NULL, NULL, NULL)

;


MERGE INTO Interpretations.PlayStep t
USING @PlayStep s
ON t.PlayKey = s.PlayKey AND t.TempoNumber = s.TempoNumber AND t.Actor = s.Actor
WHEN NOT MATCHED THEN
    INSERT
(  PlayKey,
TempoNumber,
Actor,
FootworkKey,
TechniqueKey1,
TechniqueKey2,
TechniqueKey3,
TargetKey1,
TargetKey2,
TargetKey3,
GuardKey,
GuardModifierKey,
IntermediateGuardKey,
IntermediateGuardModifierKey,
Notes )
    VALUES
    (  s.PlayKey,
s.TempoNumber,
s.Actor,
s.FootworkKey,
s.TechniqueKey1,
s.TechniqueKey2,
s.TechniqueKey3,
s.TargetKey1,
s.TargetKey2,
s.TargetKey3,
s.GuardKey,
s.GuardModifierKey,
s.IntermediateGuardKey,
s.IntermediateGuardModifierKey,
s.Notes )
WHEN MATCHED THEN
    UPDATE SET  FootworkKey = s.FootworkKey,
TechniqueKey1 = s.TechniqueKey1,
TechniqueKey2 = s.TechniqueKey2,
TechniqueKey3 = s.TechniqueKey3,
TargetKey1 = s.TargetKey1,
TargetKey2 = s.TargetKey2,
TargetKey3 = s.TargetKey3,
GuardKey = s.GuardKey,
GuardModifierKey = s.GuardModifierKey,
IntermediateGuardKey = s.IntermediateGuardKey,
IntermediateGuardModifierKey = s.IntermediateGuardModifierKey,
Notes = s.Notes;

END;
GO
